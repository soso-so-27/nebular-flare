@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);


  /* Brand Color Utilities */
  --color-brand-sage: var(--sage);
  --color-brand-peach: var(--peach);
  --color-brand-lavender: var(--lavender);

  /* Semantic Aliases */
  --color-axis: var(--sage);
  --color-emotion: var(--peach);
  --color-attention: var(--lavender);
  --color-base-glass: var(--background);
}

/* Brand-inspired color palette - 猫のいる暮らしを、そっと整える */
:root {
  --radius: 0.75rem;

  /* Brand Base - 生成り/乳白ガラス (warmer, softer) */
  --background: #FAF8F5;
  --foreground: oklch(0.22 0.012 45);

  /* Card/Popover - Enhanced Glassmorphism */
  --card: rgba(255, 255, 255, 0.72);
  --card-foreground: oklch(0.22 0.012 45);
  --card-border: rgba(255, 255, 255, 0.25);
  --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.06), 0 2px 8px rgba(0, 0, 0, 0.04);
  --popover: rgba(255, 255, 255, 0.92);
  --popover-foreground: oklch(0.22 0.012 45);

  /* Brand Semantic Colors - Refined for cat photos */
  --sage: oklch(0.65 0.12 150);
  /* 軸色：安心・継続 - slightly more vibrant */
  --peach: oklch(0.78 0.14 45);
  /* 感情：楽しさ・体温 - warmer, more golden */
  --lavender: oklch(0.70 0.12 285);
  /* 変化：静かな注意 - slightly richer */
  --cream: oklch(0.96 0.02 75);
  /* 補助：柔らかなハイライト */

  /* Primary = Sage（軸色） */
  --primary: var(--sage);
  --primary-foreground: oklch(0.98 0 0);

  /* Secondary - Warm neutral */
  --secondary: oklch(0.95 0.012 70);
  --secondary-foreground: oklch(0.32 0.015 45);

  /* Muted - Softer */
  --muted: oklch(0.94 0.01 70);
  --muted-foreground: oklch(0.48 0.015 45);

  /* Accent = Peach（感情） */
  --accent: oklch(0.94 0.04 45);
  --accent-foreground: oklch(0.28 0.015 45);

  /* Destructive = ラベンダー（静かな注意）*/
  --destructive: var(--lavender);

  /* Borders & Inputs - Softer */
  --border: oklch(0.91 0.012 70);
  --input: oklch(0.93 0.01 70);
  --ring: var(--sage);

  /* Chart colors - Brand palette */
  --chart-1: var(--sage);
  --chart-2: var(--peach);
  --chart-3: var(--lavender);
  --chart-4: oklch(0.72 0.10 75);
  --chart-5: oklch(0.68 0.12 25);

  /* Sidebar */
  --sidebar: oklch(0.97 0.008 75);
  --sidebar-foreground: oklch(0.22 0.012 45);
  --sidebar-primary: var(--sage);
  --sidebar-primary-foreground: oklch(0.98 0 0);
  --sidebar-accent: oklch(0.94 0.025 70);
  --sidebar-accent-foreground: oklch(0.28 0.015 45);
  --sidebar-border: oklch(0.91 0.012 70);
  --sidebar-ring: var(--sage);

  /* Rive-like Liquid Glass System (Light) */
  --glass-surface: rgba(255, 255, 255, 0.65);
  /* Luminance Boost: Higher opacity for legibility */
  --glass-highlight: rgba(255, 255, 255, 0.80);
  --glass-shadow-floating:
    0 10px 40px -10px rgba(0, 0, 0, 0.1),
    0 0 0 1px rgba(255, 255, 255, 0.4) inset;
}

.dark {
  /* Brand Semantic Colors (Dark Mode) - Enhanced visibility */
  --sage: oklch(0.70 0.12 150);
  --peach: oklch(0.75 0.13 45);
  --lavender: oklch(0.72 0.12 285);
  --cream: oklch(0.28 0.02 70);

  --background: oklch(0.14 0.01 45);
  --foreground: oklch(0.94 0.01 80);

  /* Dark Glassmorphism */
  --card: rgba(20, 20, 25, 0.72);
  --card-foreground: oklch(0.94 0.01 80);
  --card-border: rgba(255, 255, 255, 0.08);
  --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.25), 0 2px 8px rgba(0, 0, 0, 0.15);
  --popover: rgba(25, 25, 30, 0.92);
  --popover-foreground: oklch(0.94 0.01 80);

  /* Rive-like Liquid Glass System (Dark) */
  --glass-surface: rgba(30, 30, 35, 0.70);
  /* Luminance Boost (Dark) */
  --glass-highlight: rgba(255, 255, 255, 0.15);
  --glass-shadow-floating:
    0 10px 40px -10px rgba(0, 0, 0, 0.5),
    0 0 0 1px rgba(255, 255, 255, 0.1) inset;

  /* Primary = Sage */
  --primary: var(--sage);
  --primary-foreground: oklch(0.12 0 0);

  --secondary: oklch(0.24 0.01 45);
  --secondary-foreground: oklch(0.90 0.01 80);
  --muted: oklch(0.26 0.01 45);
  --muted-foreground: oklch(0.62 0.015 75);

  /* Accent = Peach */
  --accent: oklch(0.26 0.025 45);
  --accent-foreground: oklch(0.90 0.01 80);

  /* Destructive = Lavender */
  --destructive: var(--lavender);

  --border: rgba(255, 255, 255, 0.08);
  --input: rgba(255, 255, 255, 0.10);
  --ring: var(--sage);

  /* Chart colors - Brand palette */
  --chart-1: var(--sage);
  --chart-2: var(--peach);
  --chart-3: var(--lavender);
  --chart-4: oklch(0.62 0.14 75);
  --chart-5: oklch(0.60 0.14 25);

  /* Sidebar */
  --sidebar: oklch(0.18 0.01 45);
  --sidebar-foreground: oklch(0.94 0.01 80);
  --sidebar-primary: var(--sage);
  --sidebar-primary-foreground: oklch(0.12 0 0);
  --sidebar-accent: oklch(0.26 0.025 45);
  --sidebar-accent-foreground: oklch(0.90 0.01 80);
  --sidebar-border: rgba(255, 255, 255, 0.08);
  --sidebar-ring: var(--sage);
}

/* 
  === Optical Glass Utilities (Vision Pro / iOS Folder Style) === 
  Thick, physical transparency with bevels
*/
.glass-panel,
.glass-optical {
  isolation: isolate;
  background-color: var(--glass-surface);
  backdrop-filter: blur(20px) saturate(1.4);
  /* Heavier blur for "thickness" - REDUCED for text clarity */

  /* The "Thick Edge" Magic: Multiple shadows */
  box-shadow:
    var(--glass-shadow-floating),
    inset 0 0 0 1px rgba(255, 255, 255, 0.15),
    /* Outer crisp edge */
    inset 0 1px 0 0 rgba(255, 255, 255, 0.4);
  /* Top Bevel Light */

  background-image: linear-gradient(145deg,
      rgba(255, 255, 255, 0.12) 0%,
      rgba(255, 255, 255, 0.02) 40%,
      transparent 100%);

  transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
}

.glass-panel:hover,
.glass-optical:hover {
  transform: translateY(-4px) scale(1.01);
  box-shadow:
    0 30px 60px -10px rgba(0, 0, 0, 0.2),
    /* Lifted shadow */
    inset 0 0 0 1px rgba(255, 255, 255, 0.5),
    /* Brighter edge */
    inset 0 1px 0 0 rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(36px) saturate(2);
}

/* Icon button with optical thickness */
.glass-icon {
  background: var(--glass-surface);
  backdrop-filter: blur(20px) saturate(1.6);
  box-shadow:
    0 10px 20px -4px rgba(0, 0, 0, 0.15),
    inset 0 0 0 1px rgba(255, 255, 255, 0.3),
    inset 0 2px 0 0 rgba(255, 255, 255, 0.4);
  /* Strong top bevel */
  border-radius: 9999px;
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.glass-icon:active {
  transform: scale(0.94) translateY(2px);
  box-shadow:
    0 2px 10px -2px rgba(0, 0, 0, 0.1),
    inset 0 0 0 1px rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(16px);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    @apply bg-background text-foreground;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* Allow text selection in inputs and textareas */
  input,
  textarea {
    -webkit-user-select: text;
    user-select: text;
  }
}

/* iOS Safe Area Support */
html {
  height: 100%;
  height: -webkit-fill-available;
}

body {
  min-height: 100%;
  min-height: -webkit-fill-available;
  /* Allow content to extend under status bar */
  padding: 0;
  margin: 0;
}

/* Bottom navigation safe area */
.pb-safe {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* Fixed bottom nav with safe area */
.bottom-nav-safe {
  bottom: 0;
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 0.5rem);
}

/* Extend full-screen content under iOS status bar */
.extend-under-status-bar {
  /* Negative margin to extend under status bar */
  margin-top: calc(-1 * env(safe-area-inset-top, 0px));
  /* Add padding so inner content respects safe area */
  padding-top: env(safe-area-inset-top, 0px);
}

/* For fullscreen backgrounds that should cover status bar area */
.fullscreen-bg {
  position: fixed;
  top: calc(-1 * env(safe-area-inset-top, 0px));
  left: 0;
  right: 0;
  bottom: 0;
  height: calc(100% + env(safe-area-inset-top, 0px));
}

/* ===== Enhanced Glassmorphism Utilities ===== */

/* Base glass effect */
.glass {
  background: var(--card);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid var(--card-border);
  box-shadow: var(--card-shadow);
}

/* Lighter glass for overlays */
.glass-light {
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(16px) saturate(160%);
  -webkit-backdrop-filter: blur(16px) saturate(160%);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.dark .glass-light {
  background: rgba(20, 20, 25, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Heavier glass for panels */
.glass-heavy {
  background: rgba(255, 255, 255, 0.88);
  backdrop-filter: blur(24px) saturate(200%);
  -webkit-backdrop-filter: blur(24px) saturate(200%);
  border: 1px solid rgba(255, 255, 255, 0.35);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
}

.dark .glass-heavy {
  background: rgba(20, 20, 25, 0.88);
  border: 1px solid rgba(255, 255, 255, 0.12);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
}

/* Subtle inner glow for premium feel */
.glass-glow {
  box-shadow:
    var(--card-shadow),
    inset 0 1px 1px rgba(255, 255, 255, 0.1);
}

/* Card hover effect */
.glass-hover {
  transition: all 0.2s ease;
}

.glass-hover:hover {
  background: rgba(255, 255, 255, 0.82);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
  transform: translateY(-2px);
}

.dark .glass-hover:hover {
  background: rgba(20, 20, 25, 0.82);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
}